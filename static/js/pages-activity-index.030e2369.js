(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-activity-index"],{"0684":function(t,i,a){var e=a("4bad");i=e(!1),i.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.container[data-v-9481b6fc]{position:absolute;left:0;right:0;top:0;min-height:100%;padding:20px 20px}.logo-bm[data-v-9481b6fc]{width:100%;text-align:center}.label[data-v-9481b6fc]{-webkit-box-flex:0;-webkit-flex:0 0 66px;flex:0 0 66px}.btn[data-v-9481b6fc]{display:inline-block;padding-left:30px!important;padding-right:30px!important;height:45px;line-height:45px;font-size:15px;width:100%}.w-h-20[data-v-9481b6fc]{width:20px;height:20px}.footer[data-v-9481b6fc]{margin-top:30px;margin-bottom:20px;padding-bottom:20px}.do-comment[data-v-9481b6fc]{z-index:999;bottom:0;width:100%;background-color:#fff;min-height:200px}.comment-content[data-v-9481b6fc]{overflow:hidden}.comment-content uni-textarea[data-v-9481b6fc]{width:100%;font-size:15px}#save_add[data-v-9481b6fc]{background-color:#f2f2f2;color:#ccc;padding:5px 10px!important;display:inline-block;border-radius:3px}#save_add.active[data-v-9481b6fc]{background-color:#0092ff;color:#fff}.mar-10[data-v-9481b6fc]{margin:0 10px}',""]),t.exports=i},3631:function(t,i,a){var e=a("0684");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("00786ff4",e,!0,{sourceMap:!1,shadowMode:!1})},5215:function(t,i,a){"use strict";a.r(i);var e=a("db78"),n=a.n(e);for(var s in e)["default"].indexOf(s)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(s);i["default"]=n.a},8063:function(t,i,a){"use strict";a.r(i);var e=a("aa1a"),n=a("5215");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(s);a("af15");var c,o=a("f0c5"),l=Object(o["a"])(n["default"],e["b"],e["c"],!1,null,"9481b6fc",null,!1,e["a"],c);i["default"]=l.exports},aa1a:function(t,i,a){"use strict";var e;a.d(i,"b",(function(){return n})),a.d(i,"c",(function(){return s})),a.d(i,"a",(function(){return e}));var n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return t.actDetail?a("v-uni-view",{staticClass:"container pageBacGray"},[a("v-uni-view",{staticClass:"logo-bm"},[a("v-uni-image",{staticClass:"logo",attrs:{src:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-cc38d26a-ff71-44e5-8591-2f0ef9d06033/35ff295f-31c3-4338-8a47-8fb330b23872.png"}})],1),a("v-uni-view",{staticClass:"content-box"},[a("v-uni-view",{staticClass:"title font-size-20 text-center font-bold"},[t._v(t._s(t.actDetail.title))]),a("v-uni-view",{staticClass:"time font-size-16 mar-t-20 flex"},[a("v-uni-text",{staticClass:"font-bold label"},[t._v("时间：")]),a("v-uni-text",[t._v(t._s(t.actDetail.start_time_text))])],1),a("v-uni-view",{staticClass:"address font-size-16 mar-t-20 flex"},[a("v-uni-text",{staticClass:"font-bold label"},[t._v("地点：")]),a("v-uni-text",[t._v(t._s(t.actDetail.address))])],1),t.actDetail&&"[]"!=t.actDetail.center_place?a("v-uni-view",{staticClass:"centerPlace font-size-16 mar-t-20 flex"},[a("v-uni-text",{staticClass:"font-bold label"},[t._v("集中地：")]),a("v-uni-view",{staticClass:"flex-1"},t._l(t.actDetail.center_place,(function(i,e){return a("v-uni-view",{key:e},[0==e?a("v-uni-text",[t._v(t._s(i.time)+"点 在"+t._s(i.name)+"集合")]):t._e()],1)})),1)],1):t._e(),t.actDetail&&t.actDetail.files_name?a("v-uni-view",{staticClass:"file font-size-16 mar-t-20 flex"},[a("v-uni-text",{staticClass:"font-bold label"},[t._v("附件：")]),a("a",{attrs:{href:t.actDetail.files}},[t._v(t._s(t.actDetail.files_name))])],1):t._e(),a("v-uni-view",{staticClass:"content font-size-16 mar-t-20"},[a("v-uni-rich-text",{attrs:{nodes:t.actDetail.content}})],1)],1),"shenhe"!=t.type?a("v-uni-view",{staticClass:"box-b"},[5==t.actDetail.status||6==t.actDetail.status?a("v-uni-view",{staticClass:"flex align-center text-center mar-t-30 box-b"},[a("v-uni-button",{staticClass:"btn font-color-fff",attrs:{type:"warn"}},[t._v("已结束")])],1):t._e(),t.showSignBtn()?a("v-uni-view",{staticClass:"flex align-center text-center mar-t-30 box-b"},[a("v-uni-button",{staticClass:"btn font-color-fff mar-10",attrs:{type:"primary",loading:t.loading},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.signBtn.apply(void 0,arguments)}}},[t._v("签 到")])],1):t._e(),t.showOvertimeBtn()?a("v-uni-view",{staticClass:"flex align-center text-center mar-t-30 box-b"},[a("v-uni-button",{staticClass:"btn font-color-fff mar-10",attrs:{type:"default",disabled:!0}},[t._v("已超时，无法签到")])],1):t._e(),a("v-uni-view",{staticClass:"flex align-center justify-between mar-t-20"},[t.showConfirmBtn()?a("v-uni-button",{staticClass:"btn font-color-fff mar-10",attrs:{type:"primary",loading:t.loading},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getActivityConfirm.apply(void 0,arguments)}}},[t._v("确 认")]):t._e(),t.showLeaveBtn()?a("v-uni-button",{staticClass:"btn bac-color-cccccc font-color-fff mar-10",attrs:{type:"default",color:"#666"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.show_leave=!0}}},[t._v("我 要 请 假")]):t._e(),t.showLeaveBtn()?a("v-uni-button",{staticClass:"btn font-color-fff mar-10",attrs:{type:"default",disabled:!0}},[t._v("已确认")]):t._e(),t.actDetail&&t.actDetail.myact&&"yes"==t.actDetail.myact.is_leave?a("v-uni-button",{staticClass:"btn font-color-fff mar-10",attrs:{type:"warn"}},[t._v("已请假")]):t._e(),t.showSignSuccessBtn()?a("v-uni-button",{staticClass:"btn font-color-fff mar-10",attrs:{type:"default",disabled:!0}},[t._v("已签到")]):t._e()],1),a("v-uni-view",{staticClass:"text-center mar-t-30"},[a("v-uni-view",{staticClass:"flex align-center justify-between mar-t-13"},[t.showSeeSignBtn()?a("v-uni-button",{staticClass:"btn bac-color-cccccc font-color-fff mar-10",attrs:{type:"default",color:"#666"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toView("/pages/activity/signList?uid="+t.actDetail.uid)}}},[t._v("签到情况")]):t._e(),t.showSeeSureBtn()?a("v-uni-button",{staticClass:"btn bac-color-cccccc font-color-fff mar-10",attrs:{type:"primary",color:"#ffffff"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toView("/pages/activity/sureList?uid="+t.actDetail.uid)}}},[t._v("确认情况")]):t._e()],1)],1)],1):t._e(),"shenhe"==t.type?a("v-uni-view",[0==t.actDetail.status?a("v-uni-view",{staticClass:"text-center mar-t-30"},[a("v-uni-button",{staticClass:"btn font-color-fff",attrs:{type:"warn",disabled:!0}},[t._v("已结束")])],1):t._e(),1==t.actDetail.status?a("v-uni-view",{staticClass:"text-center mar-t-30"},[a("v-uni-button",{staticClass:"btn font-color-fff",attrs:{type:"warn",disabled:!0}},[t._v("待发布")])],1):t._e(),2==t.actDetail.status?a("v-uni-view",{staticClass:"text-center mar-t-30"},[a("v-uni-button",{staticClass:"btn font-color-fff",attrs:{type:"warn",disabled:!0}},[t._v("活动待审核")])],1):t._e(),3==t.actDetail.status&&"shenhe"==t.type?a("v-uni-view",{staticClass:"text-center mar-t-30"},[a("v-uni-button",{staticClass:"btn font-color-fff",attrs:{type:"warn",disabled:!0}},[t._v("审核成功，等待活动开始")])],1):t._e(),4==t.actDetail.status?a("v-uni-view",{staticClass:"text-center mar-t-30"},[a("v-uni-button",{staticClass:"btn font-color-fff",attrs:{type:"warn",disabled:!0}},[t._v("审核失败")])],1):t._e(),2==t.actDetail.status&&"无权限"!=t.power?a("v-uni-view",{staticClass:"text-center mar-t-30"},[a("v-uni-button",{staticClass:"btn font-color-fff",attrs:{type:"warn",loading:t.loading},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.checkBtn.apply(void 0,arguments)}}},[t._v("审核")])],1):t._e()],1):t._e(),a("v-uni-view",{staticClass:"footer"},[a("v-uni-view",{staticClass:"text-center font-color-999"},[t._v("© 2021 苍南县政协委员履职系统 V2.0")])],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show_leave,expression:"show_leave"}],staticClass:"mask ",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.comment.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"do-comment pos-fixed",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i)}}},[a("v-uni-view",{staticClass:"container pad-t-20"},[a("v-uni-view",{staticClass:"flex align-center"},[a("v-uni-view",{staticClass:"cancel"},[a("i",{staticClass:"weui-icon-cancel font-color-ccc"})]),a("v-uni-view",{staticClass:"text-center flex-1 font-bold font-size-16"},[t._v("填写请假理由")]),a("v-uni-view",{class:{active:t.reason},attrs:{id:"save_add"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.submitLeave.apply(void 0,arguments)}}},[t._v("提交")])],1),a("v-uni-view",{staticClass:"comment-content mar-t-10"},[a("v-uni-textarea",{attrs:{name:"",id:"comment-info",placeholder:t.placeholder},model:{value:t.reason,callback:function(i){t.reason=i},expression:"reason"}})],1)],1)],1)],1)],1):t._e()},s=[]},af15:function(t,i,a){"use strict";var e=a("3631"),n=a.n(e);n.a},db78:function(t,i,a){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,a("d3b7"),a("25f0");var e=a("751a"),n={data:function(){return{uid:"",type:"",reason:"",placeholder:"请假理由...",show_leave:!1,actDetail:"",power:"",loading:!1}},onLoad:function(i){t.log("query",i),this.uid=i.uid,this.type=i.type,this.getActDetail(),this.auditPower()},methods:{signBtn:function(){var i=this;uni.showModal({title:"温馨提示",content:"您确认要签到吗？",cancelText:"取消",confirmText:"确认",success:function(a){t.log("res",a),a.confirm&&i.signEvent(),a.cancel}})},signEvent:function(){var i=this,a={uid:this.uid};this.loading=!0,(0,e.getActivitySign)(a).then((function(a){t.log("res",a),i.loading=!1,uni.showModal({content:a.msg,showCancel:!1}),i.getActDetail()})).catch((function(t){i.loading=!1}))},auditPower:function(){var i=this;(0,e.auditPower)().then((function(a){t.log("auditPower_res",a),i.power=a,t.log("power",i.power)}))},init:function(){this.show_leave=!1,this.pid=0,this.current_comment_index="",this.remark="",this.placeholder="建议意见..."},comment:function(){this.init()},submitLeave:function(){var i=this;if(this.reason){var a={uid:this.uid,leave_info:this.reason};(0,e.getActivityLeave)(a).then((function(a){t.log("res",a),i.init(),uni.showToast({title:"请假成功"}),i.actDetail.myact.is_leave="yes"}))}else this.errorToShow("请填写请假理由")},checkBtn:function(){var i=this;uni.showModal({title:"温馨提示",content:"您确认要审核此活动吗？",cancelText:"不通过",confirmText:"通过",success:function(a){t.log("res",a),a.confirm&&i.checkEvent(3),a.cancel&&i.checkEvent(4)}})},checkEvent:function(i){var a=this,n={uid:this.uid,status:i};this.loading=!0,(0,e.auditActivity)(n).then((function(i){a.loading=!1,t.log("auditActivity_res",i),uni.showModal({content:i.msg,showCancel:!1}),a.getActDetail()})).catch((function(i){t.log("auditActivity_catch_res",i)})).finally((function(t){a.loading=!1}))},getActivityConfirm:function(){var i=this;uni.showModal({title:"温馨提示",content:"您确认要参加此活动吗？",success:function(a){var n=this;if(a.confirm){var s={uid:i.uid};this.loading=!0,(0,e.getActivityConfirm)(s).then((function(a){n.loading=!1,t.log("res",a),uni.showToast({title:"确认成功"}),i.actDetail.myact.is_confirm="yes"})).finally((function(t){n.loading=!1}))}}})},toView:function(t){uni.navigateTo({url:t})},getActDetail:function(){var t=this,i={uid:this.uid};(0,e.getActivityDetail)(i).then((function(i){t.actDetail=i,"[]"!=t.actDetail.center_place&&(t.actDetail.center_place=JSON.parse(i.center_place),t.actDetail.center_place.push(t.actDetail.center_place[0]))}))},downLoad:function(){},showConfirmBtn:function(){var t=!1;return 3==this.actDetail.status&&this.actDetail.myact&&"no"==this.actDetail.myact.is_confirm&&(t=!0),t},showConfirmSuccessBtn:function(){var t=!1;return 3==this.actDetail.status&&this.actDetail.myact&&"yes"==this.actDetail.myact.is_confirm&&(t=!0),t},showLeaveBtn:function(){var t=!1;return 3==this.actDetail.status&&this.actDetail.myact&&"yes"==this.actDetail.myact.is_confirm&&"no"==this.actDetail.myact.is_sign&&"no"==this.actDetail.myact.is_leave&&(t=!0),t},showSignBtn:function(){var t=!1;if(3==this.actDetail.status&&this.actDetail.myact&&"yes"==this.actDetail.myact.is_confirm&&"no"==this.actDetail.myact.is_sign){var i=this.timest();this.actDetail.start_time<=i&&this.actDetail.end_time>=i&&(t=!0)}return t},showOvertimeBtn:function(){var t=!1;if(3==this.actDetail.status&&this.actDetail.myact&&"yes"==this.actDetail.myact.is_confirm&&"no"==this.actDetail.myact.is_sign){var i=this.timest();i>this.actDetail.end_time&&(t=!0)}return t},showSignSuccessBtn:function(){var t=!1;return 3==this.actDetail.status&&this.actDetail.myact&&"yes"==this.actDetail.myact.is_sign&&(t=!0),t},showSeeSureBtn:function(){var t=!1;return 3==this.actDetail.status&&this.actDetail.myact&&"yes"==this.actDetail.myact.is_confirm&&(t=!0),t},showSeeSignBtn:function(){var t=!1;if(3==this.actDetail.status&&this.actDetail.myact&&"yes"==this.actDetail.myact.is_confirm){var i=this.timest();this.actDetail.start_time<=i&&(t=!0)}return t},timest:function(){var t=Date.parse(new Date).toString();return t=t.substr(0,10),t}}};i.default=n}).call(this,a("5a52")["default"])}}]);