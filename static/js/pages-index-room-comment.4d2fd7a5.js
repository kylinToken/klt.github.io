(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-room-comment"],{"04c1":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"file-picker"},[t._l(t.filesList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"file-box",style:t.boxStyle},[i("v-uni-view",{staticClass:"file-box-content",style:t.borderStyle},[i("v-uni-image",{staticClass:"file-image",attrs:{src:e.url,mode:"aspectFill"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.prviewImage(e,a)}}}),t.delIcon&&!t.readonly?i("v-uni-view",{staticClass:"icon-del-box",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.delFile(a)}}},[i("v-uni-view",{staticClass:"icon-del"}),i("v-uni-view",{staticClass:"icon-del rotate"})],1):t._e(),e.progress&&100!==e.progress||0===e.progress?i("v-uni-view",{staticClass:"file-progress"},[i("v-uni-progress",{staticClass:"file-progress-item",attrs:{percent:-1===e.progress?0:e.progress,"stroke-width":"4",backgroundColor:e.errMsg?"#ff5a5f":"#EBEBEB"}})],1):t._e(),e.errMsg?i("v-uni-view",{staticClass:"file-mask",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.choose.apply(void 0,arguments)}}},[t._v("点击重试")]):t._e()],1)],1)})),t.filesList.length<t.limit&&!t.readonly?i("v-uni-view",{staticClass:"file-box",style:t.boxStyle},[i("v-uni-view",{staticClass:"file-box-content is-add",style:t.borderStyle,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choose.apply(void 0,arguments)}}},[t._t("default",[i("v-uni-view",{staticClass:"icon-add"}),i("v-uni-view",{staticClass:"icon-add rotate"})])],2)],1):t._e()],2)},o=[]},"053a":function(t,e,i){"use strict";(function(t){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a15b"),i("d3b7");var n=a(i("cb84")),o=i("751a"),s={data:function(){return{id:"",title:"",realname:"",mobile:"",content:"",type:"room",imageValue:[],images:[],loading:!1}},components:{fileUpload:n.default},methods:{inputImg:function(e){this.imageValue=e,t.log("this.imageValue",this.imageValue)},comment:function(){var e=this;uni.showLoading(),this.loading=!0;var i={type:this.type,id:this.id,title:this.title,mobile:this.mobile,realname:this.realname,files:this.imageValue.join(","),content:this.content};t.log("params",i),(0,o.commentsCreate)(i).then((function(t){t&&(uni.hideLoading(),e.loading=!1,e.successToShow("提交成功",(function(){uni.navigateBack({delta:1})})))})).finally((function(t){uni.hideLoading(),e.loading=!1}))}},onLoad:function(t){this.id=t.id}};e.default=s}).call(this,i("5a52")["default"])},"3c58":function(t,e,i){var a=i("f6d5");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("3a855f50",a,!0,{sourceMap:!1,shadowMode:!1})},5381:function(t,e,i){"use strict";i.r(e);var a=i("053a"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"77d5":function(t,e,i){var a=i("fbd9");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("6e51d1f0",a,!0,{sourceMap:!1,shadowMode:!1})},"8fdd":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{},[i("v-uni-image",{staticClass:"w-100",attrs:{src:"https://cnzx.gov.cn/uploads/20211202/f27dfb811657b516ae0674ed5b963ecd.jpg",mode:"widthFix"}}),i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"studio-info pos-rel"},[i("v-uni-view",{staticClass:"pos-abs consult-title text-center font-color-fac"},[t._v("填 写 咨 询 内 容")]),i("v-uni-view",{staticStyle:{"padding-top":"40px","padding-bottom":"20px"}},[i("v-uni-view",{staticClass:"flex list align-center font-size-15"},[i("v-uni-view",{staticClass:"font-color-fff "},[t._v("您的姓名")]),i("v-uni-input",{staticClass:"flex-1 mar-l-15 bac-color-fff",attrs:{type:"text",placeholder:"请输入您的姓名"},model:{value:t.realname,callback:function(e){t.realname=e},expression:"realname"}})],1),i("v-uni-view",{staticClass:"flex list align-center mar-t-20 font-size-15"},[i("v-uni-view",{staticClass:"font-color-fff "},[t._v("联系方式")]),i("v-uni-input",{staticClass:"flex-1 mar-l-15 bac-color-fff",attrs:{type:"text",placeholder:"请输入联系方式",maxlength:"11"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),i("v-uni-view",{staticClass:"flex list align-center mar-t-20 font-size-15"},[i("v-uni-view",{staticClass:"font-color-fff"},[t._v("咨询标题")]),i("v-uni-input",{staticClass:"flex-1 mar-l-15 bac-color-fff",attrs:{type:"text",placeholder:"请输入咨询标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("v-uni-view",{staticClass:"list mar-t-15"},[i("v-uni-textarea",{staticClass:"content bac-color-fff",attrs:{name:"content",id:"",cols:"30",rows:"7",placeholder:"请详细描述问题内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),i("v-uni-view",{staticClass:" upload-title font-color-fff  border-b-1 pad-b-5 mar-t-15 dis-inline-block font-size-15"},[t._v("点击上传图片 (最多上传3张)")]),i("v-uni-view",{staticClass:"upload-box bac-color-fff  pad-l-10 pad-r-10 pad-t-10 pad-b-10"},[i("v-uni-view",{staticClass:"flex align-center"},[i("v-uni-view",{staticClass:"flex-1"},[t._v("附件上传：")]),i("v-uni-view",{staticClass:"font-color-888"},[t._v(t._s(t.imageValue.length)+"/3")])],1),i("v-uni-view",{staticClass:"mar-t-5"},[i("file-upload",{attrs:{"file-extname":"png,jpg",limit:3,images:t.images},on:{"update:images":function(e){arguments[0]=e=t.$handleEvent(e),t.images=e},input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputImg.apply(void 0,arguments)}},model:{value:t.imageValue,callback:function(e){t.imageValue=e},expression:"imageValue"}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"text-center mar-b-20"},[i("v-uni-button",{staticClass:"consult-btn mar-b-20",attrs:{loading:t.loading,disabled:t.loading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comment.apply(void 0,arguments)}}},[t._v("向 TA 咨询")])],1)],1)],1)},o=[]},"96dd":function(t,e,i){"use strict";i.r(e);var a=i("8fdd"),n=i("5381");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("aeee");var s,l=i("f0c5"),r=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"2e0363f4",null,!1,a["a"],s);e["default"]=r.exports},aeee:function(t,e,i){"use strict";var a=i("3c58"),n=i.n(a);n.a},cb84:function(t,e,i){"use strict";i.r(e);var a=i("04c1"),n=i("cf08");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("e0e9");var s,l=i("f0c5"),r=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"616f0a7a",null,!1,a["a"],s);e["default"]=r.exports},cf08:function(t,e,i){"use strict";i.r(e);var a=i("f283"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},e0e9:function(t,e,i){"use strict";var a=i("77d5"),n=i.n(a);n.a},f283:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3"),i("4160"),i("159b"),i("99af"),i("a434"),i("c975"),i("d3b7"),i("ac1f"),i("5319"),i("baa5"),i("d81d"),i("1276");var a={emits:["select","success","fail","progress","delete","update:images","input"],props:{value:{type:[Array,Object],default:function(){return[]}},limit:{type:[Number,String],default:9},fileMediatype:{type:String,default:"image"},imageStyles:{type:Object,default:function(){return{width:"auto",height:"auto",border:{}}}},returnType:{type:String,default:"array"},sizeType:{type:Array,default:function(){return["original","compressed"]}},fileExtname:{type:[Array,String],default:function(){return[]}},delIcon:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},watch:{value:{handler:function(e,i){t.log("oldVal",i),this.localValue=e}}},computed:{filesList:function(){var t=[];return this.files.forEach((function(e){t.push(e)})),t},showType:function(){return"image"===this.fileMediatype?this.mode:"list"},limitLength:function(){return"object"===this.returnType?1:this.limit?this.limit>=9?9:this.limit:1},styles:function(){var t={width:"auto",height:"auto",border:{}};return Object.assign(t,this.imageStyles)},boxStyle:function(){var t=this.styles,e=t.width,i=void 0===e?"auto":e,a=t.height,n=void 0===a?"auto":a,o={};"auto"===n?"auto"!==i?(o.height=this.value2px(i),o["padding-top"]=0):o.height=0:(o.height=this.value2px(n),o["padding-top"]=0),o.width="auto"===i?"auto"!==n?this.value2px(n):"33.3%":this.value2px(i);var s="";for(var l in o)s+="".concat(l,":").concat(o[l],";");return s},borderStyle:function(){var t=this.styles.border,e={};if("boolean"===typeof t)e.border=t?"1px #eee solid":"none";else{var i=t&&t.width||1;i=this.value2px(i);var a=t&&t.radius||5;a=this.value2px(a),e={"border-width":i,"border-style":t&&t.style||"solid","border-color":t&&t.color||"#eee","border-radius":a}}var n="";for(var o in e)n+="".concat(o,":").concat(e[o],";");return n}},data:function(){return{files:[],localValue:[]}},methods:{delFile:function(t){this.files.splice(t,1),this.setEmit(),this.$emit("delFile",t)},prviewImage:function(t,e){var i=[];1===Number(this.limit)&&this.disablePreview&&!this.disabled&&this.$emit("choose"),this.disablePreview||(this.filesList.forEach((function(t){i.push(t.url)})),uni.previewImage({urls:i,current:e}))},value2px:function(t){return"number"===typeof t?t+="px":-1===t.indexOf("%")&&(t=-1!==t.indexOf("px")?t:t+"px"),t},setEmit:function(){t.log("setEmit",this.files);var e=[];this.files.forEach((function(t){t.url&&e.push(t.url)})),this.$emit("input",e)},choose:function(){if(!this.disabled)if(this.files.length>=Number(this.limitLength)&&"array"===this.returnType)uni.showToast({title:"您最多选择 ".concat(this.limitLength," 个文件"),icon:"none"});else{var e=this;this.chooseFiles().then((function(i){t.log(i),i.tempFilePaths.forEach((function(i){var a=e.files.length;e.files.push({url:"",progress:a}),uni.showLoading({title:"图片上传中"});uni.uploadFile({url:"https://cnzx.gov.cn/api/common/upload",filePath:i,name:"file",success:function(i){if(i.data){t.log(a);var n=JSON.parse(i.data).data;e.files[a].url=n.fullurl,e.setEmit()}},complete:function(t){setTimeout((function(){uni.hideLoading()}),3e3)}})}))}))}},chooseFiles:function(){var t=this,e=this.get_extname(this.fileExtname);return new Promise((function(a,n){uni.chooseImage({type:t.fileMediatype,compressed:!0,sizeType:["compressed"],extension:e.length>0?e:void 0,count:t.limitLength-t.files.length,onChooseFile:t.chooseFileCallback,success:function(t){a(i(t,"image"))},fail:function(t){n({errMsg:t.errMsg.replace("chooseImage:fail",ERR_MSG_FAIL)})}})}));function i(t,e){return t.tempFiles.forEach((function(t,i){t.name||(t.name=t.path.substring(t.path.lastIndexOf("/")+1)),e&&(t.fileType=e),t.cloudPath=Date.now()+"_"+i+t.name.substring(t.name.lastIndexOf("."))})),t.tempFilePaths||(t.tempFilePaths=t.tempFiles.map((function(t){return t.path}))),t}},get_extname:function(t){if(Array.isArray(t))return t;var e=t.replace(/(\[|\])/g,"");return e.split(",")}}};e.default=a}).call(this,i("5a52")["default"])},f6d5:function(t,e,i){var a=i("4bad");e=a(!1),e.push([t.i,"uni-page-body[data-v-2e0363f4]{background-color:#b02125;height:100%}.font-color-fac[data-v-2e0363f4]{color:#f7dc80}.studio-info[data-v-2e0363f4]{padding:0 20px;border:1px solid #f7dc80;border-radius:5px}.consult-title[data-v-2e0363f4]{height:40px;line-height:40px;\r\n    /* width: 100px; */padding:0 10px;background-color:#b02125;top:-20px;left:50%;font-size:16px;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.list[data-v-2e0363f4]{overflow:hidden;border-radius:5px}.list uni-input[data-v-2e0363f4]{height:32px;line-height:32px;padding-left:10px;padding-right:10px;border-radius:5px}.list uni-textarea[data-v-2e0363f4]{padding:5px 10px;width:100%;border-radius:5px}.title-btn[data-v-2e0363f4]{background-color:#f7dc80;color:#af2025;font-size:15px;font-weight:700;padding:3px 10px;border-radius:5px}.footer[data-v-2e0363f4]{margin-top:30px;margin-bottom:20px}.consult-btn[data-v-2e0363f4]{display:inline-block;margin-top:40px;width:150px;height:40px;line-height:40px;font-size:18px;font-weight:700;text-align:center;border-radius:10px;background-color:#f7dc80;color:#af2025}body.?%PAGE?%[data-v-2e0363f4]{background-color:#b02125}",""]),t.exports=e},fbd9:function(t,e,i){var a=i("4bad");e=a(!1),e.push([t.i,".file-picker[data-v-616f0a7a]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;box-sizing:border-box;\r\n-webkit-flex-wrap:wrap;flex-wrap:wrap;margin:-5px}.file-box[data-v-616f0a7a]{position:relative;\r\n    /* flex: 0 0 33.3%; */width:33.3%;height:0;padding-top:33.33%;\r\nbox-sizing:border-box\n}.file-box-content[data-v-616f0a7a]{position:absolute;top:0;right:0;bottom:0;left:0;margin:5px;border:1px #eee solid;border-radius:8px;overflow:hidden}.file-progress[data-v-616f0a7a]{position:absolute;bottom:0;left:0;right:0;\r\n    /* border: 1px red solid; */z-index:2}.file-progress-item[data-v-616f0a7a]{width:100%}.file-mask[data-v-616f0a7a]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\r\n-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:absolute;right:0;top:0;bottom:0;left:0;color:#fff;font-size:12px;background-color:rgba(0,0,0,.4)}.file-image[data-v-616f0a7a]{width:100%;height:100%}.is-add[data-v-616f0a7a]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\r\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.icon-add[data-v-616f0a7a]{width:50px;height:5px;background-color:#f1f1f1;border-radius:2px}.rotate[data-v-616f0a7a]{position:absolute;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.icon-del-box[data-v-616f0a7a]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\r\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:5px;right:5px;height:26px;width:26px;border-radius:50%;background-color:rgba(0,0,0,.5);z-index:2;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.icon-del[data-v-616f0a7a]{width:15px;height:2px;background-color:#fff;border-radius:2px}",""]),t.exports=e}}]);